<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./src/css/signup.css">
  <link rel="stylesheet" href="./src/css/style.css">
  <title>Sign up</title>
</head>
<body>
  <main>
    <div class="container">
      <form action="submit_registration_data.php" method="post" onsubmit="return registerUser()">
        <div class="card">
          <h1>Sign up</h1>
          <div class="label-float">
            <input type="text" id="regUser" required />
            <label for="regUser">Username</label>
          </div>
          <div class="label-float">
            <input type="email" id="email" required />
            <label for="email">Email</label>
          </div>
          <div class="label-float">
            <input type="number" id="number" required />
            <label for="number">Phone Number</label>
          </div>
          <div class="label-float">
            <input type="password" id="regPassword" required />
            <label for="regPassword">Password</label>
          </div>
          <div class="label-float">
            <input type="password" id="password_confirm" onkeyup="verificar()" required />
            <label for="password_confirm">Confirm Password</label>
          </div>

          <div class="justify">
            <input type="submit" value="Sign up"/>
          </div>
          <div class="sep">
          </div>
        </div>
      </form>
    </div>
  </main>
  <script>
    function registerUser() {
      var username = document.getElementById('regUser').value;
      var password = document.getElementById('regPassword').value;
    
      // Retrieve registered user data from local storage
      var registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || {};
    
      // Check if the username is already registered
      if (registeredUsers.hasOwnProperty(username)) {
        alert('Username already exists. Please choose a different username.');
        return false; // Prevent form submission
      }
    
      // Register the new user
      registeredUsers[username] = password;
      localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
    
      alert('Registered successfully! You can now log in.');
      
      // Redirect to the login page
      window.location.href = 'index.html';
      
      return false; // Prevent form submission
    }
  </script>
</body>
</html>
